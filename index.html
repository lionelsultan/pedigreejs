<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>PedigreeJS · Test</title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+/CM1Ll" crossorigin="anonymous" />
	<link href="https://code.jquery.com/ui/1.12.1/themes/cupertino/jquery-ui.min.css" rel="stylesheet" type="text/css" media="all" />
	<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.1/css/all.min.css" rel="stylesheet" type="text/css" media="all" />
	<link rel="stylesheet" href="build/pedigreejs.v4.0.0-rc1.css" />
	<link rel="stylesheet" href="build/site.v4.0.0-rc1.css" />
	<link rel="stylesheet" href="css/enhanced-visual.css" />
	<link rel="stylesheet" href="css/critical-fixes.css" />

	<style>
		body {
			font-family: system-ui, -apple-system, sans-serif;
			background: #f8fafc;
			margin: 0;
			padding: 20px;
		}

		.container {
			max-width: 1200px;
			margin: 0 auto;
		}

		#pedigrees {
			border-radius: 12px;
			border: 1px solid #e5e7eb;
			background: #ffffff;
			min-height: 600px;
			margin-bottom: 20px;
		}

		.toolbar {
			display: flex;
			gap: 0.5rem;
			justify-content: flex-end;
			margin-bottom: 1rem;
		}
	</style>

	<script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js" defer integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js" defer integrity="sha256-8glLv2FBs1lyLE/kVOtsSw8OQswQzHr5IfwVj864ZTk=" crossorigin="anonymous"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" defer integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
	<script src="build/pedigreejs.v4.0.0-rc1.min.js" defer></script>
	<script src="js/index-page.js" defer></script>
	<script src="js/visual-enhancements.js" defer></script>
</head>
<body>
	<div class="container">
		<h1 class="my-4">PedigreeJS · Test</h1>

		<div class="toolbar" role="group" aria-label="Outils de vue">
			<button type="button" class="btn btn-sm btn-outline-primary" id="zoom-in-control" title="Zoomer">
				<i class="fa fa-search-plus"></i> Zoom +
			</button>
			<button type="button" class="btn btn-sm btn-outline-primary" id="zoom-out-control" title="Dézoomer">
				<i class="fa fa-search-minus"></i> Zoom -
			</button>
			<button type="button" class="btn btn-sm btn-outline-secondary" id="fullscreen-toggle" title="Plein écran" aria-pressed="false" aria-controls="pedigrees">
				<i class="fa fa-expand"></i> Plein écran
			</button>
		</div>

		<div id="pedigrees" class="position-relative" role="application" aria-label="Canvas de pedigree">
			<div class="loading-overlay position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center" id="canvas-loading" style="display:none; background: rgba(248, 250, 252, 0.9);">
				<div class="spinner-border text-primary" role="status">
					<span class="visually-hidden">Chargement…</span>
				</div>
			</div>
		</div>

		<div id="node_properties" class="mt-3"></div>

		<div class="mt-4 p-3 border rounded bg-white">
			<h3 class="h5 mb-3">Contrôles</h3>
			<div class="mb-3 d-flex flex-wrap gap-2">
				<button class="btn btn-sm btn-outline-primary" type="button" id="save-boadicea">Export BOADICEA</button>
				<button class="btn btn-sm btn-outline-secondary" type="button" id="save-canrisk">Export CanRisk</button>
			</div>
			<div>
				<label for="load" class="form-label small">Charger un JSON</label>
				<input type="file" id="load" class="form-control form-control-sm" accept="application/json">
			</div>
			<div class="mt-3 small text-muted">
				<div>Statut : <strong id="dataset-status">Démo chargée</strong></div>
				<div>Temps de rendu : <span id="performance-info">—</span></div>
			</div>
		</div>
	</div>
</body>
</html>
