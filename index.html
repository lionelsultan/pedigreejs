<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- SEO & Metadata -->
	<title>PedigreeJS - Modern Web Tool for Building Interactive Family Pedigrees</title>
	<meta name="description" content="PedigreeJS is a JavaScript library for building and displaying interactive family pedigrees using D3.js. Features include real-time editing, validation, and export capabilities.">
	<meta name="keywords" content="pedigree, family tree, genealogy, javascript, d3js, genetics, visualization">
	<meta name="author" content="CCGE-BOADICEA">

	<!-- Open Graph -->
	<meta property="og:title" content="PedigreeJS - Interactive Pedigree Builder">
	<meta property="og:description" content="Build and visualize family pedigrees with this modern JavaScript library">
	<meta property="og:type" content="website">
	<meta property="og:url" content="https://lionelsultan.github.io/pedigreejs/">

	<!-- Stylesheets -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW7CM1Ll" crossorigin="anonymous" />
	<link href="https://code.jquery.com/ui/1.12.1/themes/cupertino/jquery-ui.min.css" rel="stylesheet" type="text/css" media="all" />
	<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.1/css/all.min.css" rel="stylesheet" type="text/css" media="all" />
	<link rel="stylesheet" href="build/pedigreejs.v4.0.0-rc1.css" />
	<link rel="stylesheet" href="build/site.v4.0.0-rc1.css" />
	<link rel="stylesheet" href="css/enhanced-visual.css" />
	<link rel="stylesheet" href="css/critical-fixes.css" />

	<!-- Scripts -->
	<script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js" defer integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js" defer integrity="sha256-8glLv2FBs1lyLE/kVOtsSw8OQswQzHr5IfwVj864ZTk=" crossorigin="anonymous"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" defer integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
 	<script src="build/pedigreejs.v4.0.0-rc1.min.js" defer></script>
	<script src="js/index-page.js" defer></script>
	<script src="js/visual-enhancements.js" defer></script>


	
</head>

<body class="bg-body">
	<!-- Skip Navigation for Accessibility -->
	<a href="#main-content" class="skip-nav">Skip to main content</a>

	<nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom sticky-top" aria-label="Primary">
		<div class="container">
			<a class="navbar-brand fw-semibold" href="#main-content">PedigreeJS</a>
			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#primaryNav" aria-controls="primaryNav" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="primaryNav">
				<ul class="navbar-nav ms-auto mb-2 mb-lg-0">
					<li class="nav-item"><a class="nav-link" href="#main-content">Demo</a></li>
					<li class="nav-item"><a class="nav-link" href="#overview-heading">Overview</a></li>
					<li class="nav-item"><a class="nav-link" href="#options-heading">Options</a></li>
					<li class="nav-item"><a class="nav-link" href="#publication-heading">Publication</a></li>
				</ul>
			</div>
		</div>
	</nav>

	<!-- Header -->
	<header class="py-5 bg-white border-bottom floating" role="banner">
		<div class="container d-flex flex-column flex-lg-row align-items-start align-items-lg-center justify-content-between gap-3">
			<div class="text-start">
				<p class="text-uppercase small text-secondary mb-2 animate-ready">PedigreeJS</p>
				<h1 class="display-4 fw-semibold mb-3 text-dark animate-ready">Design family pedigrees with clarity.</h1>
				<p class="fs-5 text-muted mb-0 animate-ready">An elegant D3.js toolkit for building, validating, and sharing medical-grade pedigree diagrams.</p>
			</div>
			<a class="btn btn-primary btn-lg px-4 animate-ready"
			   href="https://github.com/lionelsultan/pedigreejs"
			   target="_blank"
			   rel="noopener noreferrer"
			   aria-label="View PedigreeJS source code on GitHub (opens in new window)">
				<i class="fa fa-github me-2" aria-hidden="true"></i>View on GitHub
			</a>
		</div>
	</header>

		<!-- Improvements Banner -->
		<section class="py-5 bg-body">
		<div class="container">
			<div class="text-center mb-4">
				<p class="text-uppercase text-secondary small mb-2">Release v4.0.0-rc1</p>
				<h2 class="h3 fw-semibold text-dark mb-2">Focused on clarity, performance, and trust.</h2>
				<p class="text-muted mb-0">Each phase delivers measurable improvements backed by audits.</p>
			</div>
			<div class="row g-4">
				<div class="col-md-6">
					<article class="card h-100 border-0 shadow-sm">
						<div class="card-body">
							<div class="d-flex align-items-center justify-content-between text-secondary small text-uppercase">
								<span>Phase 1</span>
								<span>Completed Nov 2024</span>
							</div>
							<h3 class="h5 mt-3 mb-3 text-dark">Architecture Refactoring</h3>
							<ul id="phase1" class="mt-3 list-unstyled" role="list">
								<li>Modular architecture: utils.js refactored from <strong>775 â†’ 75 LOC (-90%)</strong></li>
								<li>3 new specialized modules: validation.js, dom.js, tree-utils.js</li>
								<li>100% test coverage for new modules (133 specs, 0 failures)</li>
								<li>Bug fixes: is_fullscreen() now returns boolean correctly</li>
							</ul>
						</div>
					</article>
				</div>
				<div class="col-md-6">
					<article class="card h-100 border-0 shadow-sm">
						<div class="card-body">
							<div class="d-flex align-items-center justify-content-between text-secondary small text-uppercase">
								<span>Phase 2</span>
								<span>Completed Nov 2024</span>
							</div>
							<h3 class="h5 mt-3 mb-3 text-dark">Performance & Cache Optimization</h3>
							<ul id="phase2" class="mt-3 list-unstyled" role="list">
								<li>Performance measured: <strong>4-31ms</strong> rebuild time for 10-100 person pedigrees <span class="tag-excellent" role="img" aria-label="Excellent performance">excellent</span></li>
								<li>Cache improvements: LRU eviction strategy, position storage in array mode</li>
								<li>+17 new tests (150 specs total, 0 failures)</li>
								<li>Decision: No additional optimizations needed - performance exceeds targets</li>
							</ul>
						</div>
					</article>
				</div>
			</div>
			<div class="alert alert-primary mt-4" role="alert">
				ðŸ“š <strong>For technical details, see:</strong>
				<a class="alert-link" href="PHASE1_AUDIT_REPORT.md">Phase 1 Report</a>,
				<a class="alert-link" href="PHASE2_PERFORMANCE_REPORT.md">Phase 2 Report</a>,
				<a class="alert-link" href="PLAN_ACTIONS.md">Action Plan</a>
			</div>
		</div>
	</section>

	<!-- Main Content -->
	<main id="main-content" class="py-5" role="main">
		<div class="container">
			<div class="row g-4 align-items-start">
				<div class="col-lg-4">
					<div class="card shadow-sm h-100">
						<div class="card-body d-flex flex-column gap-4">
							<div>
								<h2 class="h5">Interactive controls</h2>
								<p class="text-muted small mb-0">Load demo data, export results or print the SVG canvas directly.</p>
							</div>
							<div class="btn-toolbar" role="toolbar" aria-label="Primary actions">
								<div class="btn-group flex-wrap w-100" role="group">
									<input id="load" type="file" class="visually-hidden" aria-label="Load pedigree file" />
									<label for="load" class="btn btn-outline-primary" data-bs-toggle="tooltip" data-bs-placement="top" title="Load a JSON pedigree file"><i class="fa fa-upload me-1" aria-hidden="true"></i> Load</label>
									<button id="save" type="button" class="btn btn-outline-primary" data-bs-toggle="tooltip" data-bs-placement="top" title="Download the current dataset as JSON"><i class="fa fa-save me-1" aria-hidden="true"></i> Save</button>
									<button id="print" type="button" class="btn btn-outline-primary" data-bs-toggle="tooltip" data-bs-placement="top" title="Open the browser print dialog"><i class="fa fa-print me-1" aria-hidden="true"></i> Print</button>
									<button id="svg_download" type="button" class="btn btn-outline-secondary" data-bs-toggle="tooltip" data-bs-placement="top" title="Export the SVG drawing"><i class="fa fa-file-code me-1" aria-hidden="true"></i> SVG</button>
									<button id="png_download" type="button" class="btn btn-outline-secondary" data-bs-toggle="tooltip" data-bs-placement="top" title="Export a raster image"><i class="fa fa-file-image me-1" aria-hidden="true"></i> PNG</button>
								</div>
							</div>
							<div class="btn-group d-flex" role="group" aria-label="Export formats">
								<button id="save-boadicea" type="button" class="btn btn-outline-info" data-bs-toggle="tooltip" data-bs-placement="top" title="Export a BOADICEA v4 compatible file">
									<i class="fa fa-dna me-1" aria-hidden="true"></i> BOADICEA v4
								</button>
								<button id="save-canrisk" type="button" class="btn btn-outline-info" data-bs-toggle="tooltip" data-bs-placement="top" title="Export a CanRisk pedigree file (non anonymised)">
									<i class="fa fa-vial me-1" aria-hidden="true"></i> CanRisk
								</button>
							</div>
							<div class="alert alert-secondary small mb-0" role="status" aria-live="polite">
								<span class="fw-semibold">Status:</span> <span id="dataset-status" class="ms-1">Loadingâ€¦</span>
							</div>
							<div class="mt-2">
								<small class="text-muted">
									<span id="performance-info" class="badge bg-success"></span>
								</small>
							</div>
							<p class="text-muted small mb-0">Need help configuring PedigreeJS? See the <a href="AGENTS.md" class="link-secondary text-decoration-none">contributor guide (AGENTS.md)</a>.</p>
						</div>
					</div>
				</div>
				<div class="col-lg-8">
					<div class="card shadow-sm">
						<div class="card-body">
							<div class="d-flex justify-content-between align-items-center mb-3">
								<h2 class="h5 mb-0">
									<i class="fa fa-sitemap me-2 text-primary" aria-hidden="true"></i>Pedigree canvas
								</h2>
								<div class="btn-group" role="group" aria-label="View controls">
									<button type="button" class="btn btn-sm btn-outline-primary" id="zoom-in-control" data-bs-toggle="tooltip" data-bs-placement="top" title="Zoom in">
										<i class="fa fa-search-plus" aria-hidden="true"></i>
										<span class="visually-hidden">Zoom in</span>
									</button>
									<button type="button" class="btn btn-sm btn-outline-primary" id="zoom-out-control" data-bs-toggle="tooltip" data-bs-placement="top" title="Zoom out">
										<i class="fa fa-search-minus" aria-hidden="true"></i>
										<span class="visually-hidden">Zoom out</span>
									</button>
									<button type="button" class="btn btn-sm btn-outline-secondary" id="fullscreen-toggle" data-bs-toggle="tooltip" data-bs-placement="top" title="Toggle fullscreen">
										<i class="fa fa-expand" aria-hidden="true"></i>
										<span class="visually-hidden">Toggle fullscreen</span>
									</button>
								</div>
							</div>
							<div id="pedigrees" class="pedigree-stage border rounded-3 bg-white p-3 position-relative" role="application" aria-label="Pedigree editor">
								<div class="loading-overlay position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center" id="canvas-loading" style="background: rgba(255,255,255,0.9); z-index: 10; display: none;">
									<div class="spinner-border text-primary" role="status">
										<span class="visually-hidden">Loading...</span>
									</div>
								</div>
							</div>
							<div id="node_properties" class="mt-3"></div>
						</div>
					</div>
				</div>
			</div>
			<section class="mt-5">
				<div class="card shadow-sm border-0">
					<div class="card-body p-4 p-lg-5">
						<!-- Overview Section -->
						<section aria-labelledby="overview-heading">
						<h2 id="overview-heading">Overview</h2>
						<p>
						<strong>PedigreeJS</strong> is a JavaScript library used to draw family trees using
						<a href="https://www.ncbi.nlm.nih.gov/pubmed/7887430" target="_blank" rel="noopener noreferrer">standard pedigree nomenclature</a>.
						It uses the JavaScript <a href="https://d3js.org/" target="_blank" rel="noopener noreferrer">D3.js library</a>
						to layout the hierarchical structure and draw the individual nodes as an SVG image.
						The size of the SVG can be configured as well as the colour codes used to denote disease.
						It can be used to build the pedigree structure or load in an existing data set.
						To assist visualisation and building of larger pedigrees a full screen mode is provided.
						</p>
						<p>
						Browser local storage is used to maintain a history of the steps in building a pedigree
						structure. So that at each step of the pedigree building process it can be undone to return
						to previous versions.
						</p>
						<p>
						See the <a href="docs/developer.html">developer documentation</a> for more details about setting up pedigreejs.
						</p>
						<p>
						A demonstration page is available <a href="docs/demo.html">here</a>.
						Other example pages and configurations are given below:
						</p>
						<ul role="list">
						<li>Example 1: <a href="docs/example1.html">diabetes example</a></li>
						<li>Example 2: <a href="docs/example2.html">change background, node colours and using local storage</a></li>
						<li>Example 3: <a href="docs/example3.html">change text and node size</a></li>
						<li>Example 4: <a href="docs/example4.html">PED file example with genotype data</a></li>
						<li>Example 5: <a href="docs/example5.html">consanguineous partners and first and last name labels</a></li>
						<li>Example 6: <a href="docs/example6.html">example pedigree validation</a></li>
						<li>Example 7: <a href="docs/example7.html">twins, divorced, miscarriage, termination, stillbirth and adoption</a></li>
						<li>Example 8: <a href="docs/example8.html">search pedigree data</a></li>
						<li>Example 9: <a href="docs/example9.html">consanguineous partners at different levels</a></li>
						</ul>
						</section>
						
						<!-- Building Pedigrees Section -->
						<section aria-labelledby="building-heading">
						<h2 id="building-heading">Building Pedigrees</h2>
						<p>
						Individuals can be added to the pedigree by placing the mouse over an individual to reveal
						the widgets used for editing and adding a
						partner <i class="fa fa-link" aria-hidden="true"></i><span class="sr-only">(link icon)</span> (two people with at least one child),
						parents <i class="fa fa-arrow-up" aria-hidden="true"></i><span class="sr-only">(up arrow icon)</span>,
						a sibling <i class="fa fa-user-plus" aria-hidden="true"></i><span class="sr-only">(add user icon)</span>,
						or a child <i class="fa fa-arrow-down" aria-hidden="true"></i><span class="sr-only">(down arrow icon)</span>.
						Options are given to add
						male <i class="fa fa-square-o" aria-hidden="true"></i><span class="sr-only">(square icon)</span>,
						female <i class="fa fa-circle-o" aria-hidden="true"></i><span class="sr-only">(circle icon)</span>,
						unknown <i class="fa fa-square-o fa-rotate-45" aria-hidden="true"></i><span class="sr-only">(rotated square icon)</span>,
						dizygotic (fraternal) twin <i class="fa fa-angle-up" style="font-size:1.5em" aria-hidden="true"></i><span class="sr-only">(dizygotic twin icon)</span>
						or monozygotic (identical) twin <i class="fa fa-caret-up" style="font-size:1.5em" aria-hidden="true"></i><span class="sr-only">(monozygotic twin icon)</span>.
						</p>
						<p>
						If the 'edit' parameter is set in the configuration of pedigreejs then the <i class="fa fa-cog" aria-hidden="true"></i><span class="sr-only">(settings icon)</span> widget
						is also displayed. When this widget is clicked it opens an editor dialog of the attributes associated for the individual. A default
						editor is provided that can be overridden and customised.
						</p>
						<p>
						Half siblings can be added by creating a new partner (with <i class="fa fa-link" aria-hidden="true"></i><span class="sr-only">(link icon)</span>)
						for the parent in common to the siblings.
						Consanguineous partners can be created between individual's at the same or different levels in the pedigree
						tree, <em>e.g.</em> cousins.
						This is done by placing the mouse over one of the partners and clicking and dragging the
						triple dashed line widget <img alt="handle widget" src="docs/img/handle.png"> in the direction of their new partner.
						</p>
						<p>
						There are 'undo' <i class="fa fa-undo" aria-hidden="true"></i><span class="sr-only">(undo icon)</span>,
						'redo' <i class="fa fa-repeat" aria-hidden="true"></i><span class="sr-only">(redo icon)</span> and 'reset' <i class="fa fa-refresh" aria-hidden="true"></i><span class="sr-only">(reset icon)</span>
						buttons at the top and a button to enable full screen editing <i class="fa fa-arrows-alt" aria-hidden="true"></i><span class="sr-only">(fullscreen icon)</span>.
						</p>
						</section>
						
						<!-- Loading and Saving Section -->
						<section aria-labelledby="loading-heading">
						<h2 id="loading-heading">Loading and Saving Pedigree Data</h2>
						<p>
						The pedigree can be saved out and loaded back in. Support is given to loading
						<a href="https://canrisk.atlassian.net/wiki/x/QoCjAg" target="_blank" rel="noopener noreferrer">CanRisk files</a>,
						and <a href="https://www.cog-genomics.org/plink/1.9/formats#ped" target="_blank" rel="noopener noreferrer">PED files</a> (see <a href="docs/example4.html">example 4</a>).
						</p>
						</section>
						
						<!-- Configuration Section -->
						<section aria-labelledby="config-heading">
						<h2 id="config-heading">Configuration and Integration Notes</h2>
						<p>
						The following parameters can be used to configure pedigreejs.
						Please also see the <a href="docs/developer.html">developer notes</a> for more details about
						programmatically interacting with pedigreejs.
						The important parameter to configure is 'targetDiv' which defines the HTML div used for
						drawing the pedigree. Default parameters are provided which are documented below.
						There is a configuration parameter 'edit' which can take a function, so that a
						customised editor can be written to view and edit an individual's attributes (e.g. name, sex).
						Alternatively if 'edit' is set to true a default dialog will be displayed showing the
						individual's attributes.
						</p>
						
						<pre class="options" role="region" aria-label="Configuration example code"><code>var opts = {
						'targetDiv': 'pedigree',
						'btn_target': 'pedigree_history',
						'width': 450,
						'height': 320,
						'symbol_size': 35,
						'diseases': [
						{'type': 'breast_cancer', 'colour': '#F68F35'},
						{'type': 'ovarian_cancer', 'colour': '#4DAA4D'},
						{'type': 'pancreatic_cancer', 'colour': '#4289BA'},
						{'type': 'prostate_cancer', 'colour': '#D5494A'}],
						'labels': ['age', 'yob'],
						'font_size': '.75em',
						'font_family': 'Helvetica',
						'font_weight': 700,
						'edit': true,
						'DEBUG': pedigreejs.pedigreejs_utils.urlParam('debug') !== null
						};
						var cachedDataset = pedigreejs.pedigreejs_pedcache.current(opts);
						opts.dataset = cachedDataset || dataset;
						opts = pedigreejs.pedigreejs.build(opts);</code></pre>
						</section>
						
						<!-- Options Reference -->
				<section aria-labelledby="options-heading">
					<h2 id="options-heading">Options Reference</h2>
					<div class="accordion" id="optionsAccordion">
						<div class="accordion-item">
							<h3 class="accordion-header" id="headingCore">
								<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCore" aria-expanded="true" aria-controls="collapseCore">
									Core
								</button>
							</h3>
							<div id="collapseCore" class="accordion-collapse collapse show" aria-labelledby="headingCore" data-bs-parent="#optionsAccordion">
								<div class="accordion-body">
									<dl class="row row-cols-1 gy-3">
										<div class="col"><dt id="targetDiv" class="fw-semibold">targetDiv</dt><dd>This is the id of the HTML div used for drawing the pedigree, <em>e.g.</em> 'pedigree_edit'.</dd></div>
										<div class="col"><dt id="btn_target" class="fw-semibold">btn_target</dt><dd>This is the id of the HTML div used for the buttons, <em>e.g.</em> 'pedigree_history'.</dd></div>
										<div class="col"><dt id="dataset" class="fw-semibold">dataset</dt><dd>The pedigree data to be displayed, <em>e.g.</em><pre class="options" role="region" aria-label="Dataset example"><code>[
	{"name": "m21", "sex": "M", "top_level": true},
	{"name": "f21", "sex": "F", "top_level": true},
	{"name": "ch1", "sex": "F", "mother": "f21", "father": "m21", "breast_cancer": true, "proband": true}
]</code></pre></dd></div>
									</dl>
								</div>
							</div>
						</div>
						<div class="accordion-item">
							<h3 class="accordion-header" id="headingLayout">
								<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseLayout" aria-expanded="false" aria-controls="collapseLayout">
									Layout & Labels
								</button>
							</h3>
							<div id="collapseLayout" class="accordion-collapse collapse" aria-labelledby="headingLayout" data-bs-parent="#optionsAccordion">
								<div class="accordion-body">
									<dl class="row row-cols-1 gy-3">
										<div class="col"><dt id="labels" class="fw-semibold">labels</dt><dd>Array of attributes to display under the individual's symbol, <em>e.g.</em> ['age', 'yob', 'alleles'].</dd></div>
										<div class="col"><dt id="font_size" class="fw-semibold">font_size</dt><dd>Define the font-size of the labels, <em>e.g.</em> '0.75em' or '10px'.</dd></div>
										<div class="col"><dt id="font_family" class="fw-semibold">font_family</dt><dd>Define the font-family of the labels, <em>e.g.</em> 'times'.</dd></div>
										<div class="col"><dt id="font_weight" class="fw-semibold">font_weight</dt><dd>Define the font-weight of the labels, <em>e.g.</em> 400, 700.</dd></div>
										<div class="col"><dt id="width" class="fw-semibold">width</dt><dd>Width of the SVG element, <em>e.g.</em> 600.</dd></div>
										<div class="col"><dt id="height" class="fw-semibold">height</dt><dd>Height of the SVG element, <em>e.g.</em> 400.</dd></div>
										<div class="col"><dt id="symbol_size" class="fw-semibold">symbol_size</dt><dd>Size of the nodes, <em>e.g.</em> 35.</dd></div>
									</dl>
								</div>
							</div>
						</div>
						<div class="accordion-item">
							<h3 class="accordion-header" id="headingStorage">
								<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseStorage" aria-expanded="false" aria-controls="collapseStorage">
									Storage & History
								</button>
							</h3>
							<div id="collapseStorage" class="accordion-collapse collapse" aria-labelledby="headingStorage" data-bs-parent="#optionsAccordion">
								<div class="accordion-body">
									<dl class="row row-cols-1 gy-3">
										<div class="col"><dt id="store_type" class="fw-semibold">store_type</dt><dd>Pedigree storage (for undo, redo) set to 'session', 'local' or 'array'. Default is '<a href="https://www.w3schools.com/html/html5_webstorage.asp" target="_blank" rel="noopener noreferrer">session</a>'. <strong>Recent improvements:</strong> Array mode now includes LRU eviction (max 500 entries) and position storage for zoom/pan state.</dd></div>
									</dl>
								</div>
							</div>
						</div>
						<div class="accordion-item">
							<h3 class="accordion-header" id="headingZoom">
								<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseZoom" aria-expanded="false" aria-controls="collapseZoom">
									Zoom & Interaction
								</button>
							</h3>
							<div id="collapseZoom" class="accordion-collapse collapse" aria-labelledby="headingZoom" data-bs-parent="#optionsAccordion">
								<div class="accordion-body">
									<dl class="row row-cols-1 gy-3">
										<div class="col"><dt id="zoomIn" class="fw-semibold">zoomIn</dt><dd>The factor by which the svg size can be scaled down, default 1 (no zoom in).</dd></div>
										<div class="col"><dt id="zoomOut" class="fw-semibold">zoomOut</dt><dd>The factor by which the svg size can be scaled up, default 1 (no zoom out).</dd></div>
										<div class="col"><dt id="zoomSrc" class="fw-semibold">zoomSrc</dt><dd>The source of zoom events, default ['wheel', 'button'].</dd></div>
									</dl>
								</div>
							</div>
						</div>
						<div class="accordion-item">
							<h3 class="accordion-header" id="headingBehavior">
								<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseBehavior" aria-expanded="false" aria-controls="collapseBehavior">
									Behavior
								</button>
							</h3>
							<div id="collapseBehavior" class="accordion-collapse collapse" aria-labelledby="headingBehavior" data-bs-parent="#optionsAccordion">
								<div class="accordion-body">
									<dl class="row row-cols-1 gy-3">
										<div class="col"><dt id="edit" class="fw-semibold">edit</dt><dd>Set to true to use the default dialog editor, or supply a function to provide a custom editor.</dd></div>
										<div class="col"><dt id="dragNode" class="fw-semibold">dragNode</dt><dd>Allow nodes to be dragged (default true).</dd></div>
										<div class="col"><dt id="showWidgets" class="fw-semibold">showWidgets</dt><dd>Show the contextual widgets on hover (default true).</dd></div>
										<div class="col"><dt id="DEBUG" class="fw-semibold">DEBUG</dt><dd>When true, more console output is provided and `noparents` nodes remain visible.</dd></div>
									</dl>
								</div>
							</div>
						</div>
					</div>
				</section>
						
						<!-- Publication Section -->
						<section aria-labelledby="publication-heading">
						<h2 id="publication-heading">Publication</h2>
						<p>
						<strong>pedigreejs: a web-based graphical pedigree editor</strong><br>
						Carver T, Cunningham AP, Babb de Villiers C, Lee A, Hartley S, Tischkowitz M, et al.
						<em>Bioinformatics</em>
						<a href="http://dx.doi.org/10.1093/bioinformatics/btx705" target="_blank" rel="noopener noreferrer">
						doi:10.1093/bioinformatics/btx705
						</a>
						</p>
						</section>
						</div>
						
					</div>
				</div>
			</section>
		</div>
	</main>
	<div class="toast-container position-fixed bottom-0 end-0 p-3">
		<div id="actionToast" class="toast text-bg-dark border-0" role="status" aria-live="polite" aria-atomic="true">
			<div class="toast-header text-bg-dark border-0">
				<strong class="me-auto" id="actionToastTitle">PedigreeJS</strong>
				<small id="actionToastTime">now</small>
				<button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
			</div>
			<div class="toast-body" id="actionToastBody">
				Ready.
			</div>
		</div>
	</div>
	<script>
	document.addEventListener('DOMContentLoaded', function () {
		// Initialize Bootstrap tooltips
		if (typeof bootstrap !== 'undefined') {
			document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(function (triggerEl) {
				new bootstrap.Tooltip(triggerEl);
			});
		}

		// Initialize toast notification system
		const toastEl = document.getElementById('actionToast');
		if (toastEl && typeof bootstrap !== 'undefined') {
			const toast = new bootstrap.Toast(toastEl, {
				autohide: true,
				delay: 3000
			});
		}

		// Navigation highlighting with Intersection Observer
		const navLinks = document.querySelectorAll('.navbar-nav .nav-link');
		const sections = Array.from(navLinks, link => document.querySelector(link.getAttribute('href')));
		const observer = new IntersectionObserver(entries => {
			entries.forEach(entry => {
				const id = entry.target.getAttribute('id');
				if (!id) return;
				const link = document.querySelector(`.navbar-nav .nav-link[href="#${id}"]`);
				if (link) {
					link.classList.toggle('active', entry.isIntersecting);
				}
			});
		}, {rootMargin: '-60% 0px -35% 0px'});
		sections.forEach(section => section && observer.observe(section));

		// Smooth scrolling for anchor links
		document.querySelectorAll('a[href^="#"]').forEach(anchor => {
			anchor.addEventListener('click', function (e) {
				e.preventDefault();
				const target = document.querySelector(this.getAttribute('href'));
				if (target) {
					target.scrollIntoView({
						behavior: 'smooth',
						block: 'start'
					});
				}
			});
		});

		// Error handling for missing dependencies
		let missingDeps = [];
		if (typeof jQuery === 'undefined') missingDeps.push('jQuery');
		if (typeof d3 === 'undefined') missingDeps.push('D3.js');
		if (typeof bootstrap === 'undefined') missingDeps.push('Bootstrap');

		if (missingDeps.length > 0) {
			console.warn('Missing dependencies:', missingDeps.join(', '));
			const alertDiv = document.createElement('div');
			alertDiv.className = 'alert alert-warning alert-dismissible fade show';
			alertDiv.innerHTML = `
				<strong>Warning:</strong> Some dependencies failed to load (${missingDeps.join(', ')}). 
				Some features may not work correctly.
				<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
			`;
			const container = document.querySelector('.container');
			if (container) {
				container.insertBefore(alertDiv, container.firstChild);
			}
		}
	});
	</script>
</body>
</html>
